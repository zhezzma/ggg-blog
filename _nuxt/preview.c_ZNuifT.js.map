{"version":3,"file":"preview.c_ZNuifT.js","sources":["../../../../node_modules/@nuxt/content/dist/runtime/composables/preview.js"],"sourcesContent":["import { useCookie, useRoute } from \"#imports\";\nlet showWarning = true;\nexport const useContentPreview = () => {\n  const getPreviewToken = () => {\n    return useCookie(\"previewToken\").value || process.client && sessionStorage.getItem(\"previewToken\") || void 0;\n  };\n  const setPreviewToken = (token) => {\n    useCookie(\"previewToken\").value = token;\n    useRoute().query.preview = token || \"\";\n    if (process.client) {\n      if (token) {\n        sessionStorage.setItem(\"previewToken\", token);\n      } else {\n        sessionStorage.removeItem(\"previewToken\");\n      }\n      window.location.reload();\n    }\n  };\n  const isEnabled = () => {\n    const query = useRoute().query;\n    if (Object.prototype.hasOwnProperty.call(query, \"preview\") && !query.preview) {\n      return false;\n    }\n    if (query.preview || useCookie(\"previewToken\").value) {\n      if (process.dev && showWarning) {\n        console.warn(\"[content] Client DB enabled since a preview token is set (either in query or cookie).\");\n        showWarning = false;\n      }\n      return true;\n    }\n    if (process.client && sessionStorage.getItem(\"previewToken\")) {\n      return true;\n    }\n    return false;\n  };\n  return {\n    isEnabled,\n    getPreviewToken,\n    setPreviewToken\n  };\n};\n"],"names":["useContentPreview","query","useRoute","useCookie","token"],"mappings":"+CAEO,MAAMA,EAAoB,KAiCxB,CACL,UAlBgB,IAAM,CAChB,MAAAC,EAAQC,EAAW,EAAA,MACrB,OAAA,OAAO,UAAU,eAAe,KAAKD,EAAO,SAAS,GAAK,CAACA,EAAM,QAC5D,GAEL,GAAAA,EAAM,SAAWE,EAAU,cAAc,EAAE,OAOzB,eAAe,QAAQ,cAAc,EAGpD,EAIP,gBAlCsB,IACfA,EAAU,cAAc,EAAE,OAA2B,eAAe,QAAQ,cAAc,GAAK,OAkCtG,gBAhCuBC,GAAU,CACvBD,EAAA,cAAc,EAAE,MAAQC,EACzBF,EAAA,EAAE,MAAM,QAAUE,GAAS,GAE9BA,EACa,eAAA,QAAQ,eAAgBA,CAAK,EAE5C,eAAe,WAAW,cAAc,EAE1C,OAAO,SAAS,QAClB,CAsBA","x_google_ignoreList":[0]}