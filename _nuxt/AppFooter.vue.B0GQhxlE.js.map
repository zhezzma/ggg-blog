{"version":3,"file":"AppFooter.vue.B0GQhxlE.js","sources":["../../../../components/AppFooter.vue"],"sourcesContent":["<template>\n  <footer class=\"bg-zinc-200 dark:bg-zinc-950 text-zinc-800 dark:text-zinc-500\">\n    <UContainer class=\"py-5\">\n      <div class=\"flex\">\n        <div class=\"w-1/3\">\n          <h3 class=\"font-bold text-lg mb-2\">链接</h3>\n          <ul>\n            <li v-for=\"item in menu\" :key=\"item.path\">\n              <NuxtLink\n                :key=\"item.path\"\n                :to=\"item.path\"\n                class=\"hover:text-zinc-400\"\n                >{{ item.name }}\n              </NuxtLink>\n            </li>\n          </ul>\n        </div>\n        <div class=\"w-1/3\">\n          <h3 class=\"font-bold text-lg mb-2\">关注</h3>\n          <div\n            v-if=\"author?.socials && Object.entries(author.socials)\"\n            class=\" text-2xl\"\n          >\n            <SocialIcons :socials=\"author.socials\" class=\"pr-5\" />\n          </div>\n        </div>\n   \n        <div v-if=\"newsletterEnabled\">\n          <h3 class=\"font-bold text-lg mb-2\">订阅</h3>\n          <p class=\"mb-2\">通过电子邮件获取最新文章</p>\n          <p v-if=\"error\" class=\"text-red-500 text-xs italic mb-2\">\n            订阅失败。请稍后重试\n          </p>\n          <p v-if=\"success\" class=\"text-green-500 text-xs italic mb-2\">\n            您已成功订阅\n          </p>\n\n          <form :action=\"formAction\" method=\"post\" target=\"_blank\">\n            <input\n              v-model=\"email\"\n              name=\"fields[email]\"\n              autocomplete=\"email\"\n              type=\"email\"\n              placeholder=\"welcome@hello.world\"\n              class=\"p-2 text-zinc-700 w-full\"\n              required\n            />\n            <input type=\"hidden\" name=\"ml-submit\" value=\"1\" />\n            <input type=\"hidden\" name=\"anticsrf\" value=\"true\" />\n            <UButton\n            icon=\"i-heroicons-pencil-square\"\n    size=\"lg\"\n              class=\"mt-2 w-full\"\n              @click.prevent=\"subscribe\"\n            >\n              订阅\n            </UButton>\n          </form>\n        </div>\n      </div>\n      <div\n        class=\"flex max-w-7xl m-auto mt-5 space-x-2 text-sm justify-center flex-wrap\"\n      >\n        <div>Copyright © {{ new Date().getFullYear() }}</div>\n        <div>•</div>\n        &nbsp;{{ config.title }}\n        <div>•</div>\n        &nbsp; Powered by\n        <a href=\"https://github.com/zhezzma\">{{ author?.username }}</a>\n        <div>•</div>\n        <a href=\"https://beian.miit.gov.cn/\" rel=\"noopener\" target=\"_blank\">{{ config.icp }} </a>\n        <div>•</div>\n        <img src=\"/images/beian.png\" alt=\"\" class=\"w-4 h-4\">\n        <a :href=\"wanganUrl\" rel=\"noopener\" target=\"_blank\">{{ config.wangan }} </a>\n      </div>\n    </UContainer>\n  </footer>\n</template>\n\n<script lang=\"ts\" setup>\nconst config = useAppConfig();\nconst menu = config.menu;\nconst newsletterEnabled = config.newsletter.enabled;\nconst formAction = config.newsletter.form_action;\nconst email = ref(\"\");\nconst success = ref(false);\nconst error = ref(false);\nconst author = findAuthor();\n\nconst wanganUrl = \"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=\"+config.wangan.slice(5);\n\n\nasync function subscribe() {\n  const formData = new FormData();\n  formData.append(\"fields[email]\", email.value);\n  formData.append(\"ml-submit\", \"1\");\n  formData.append(\"anticsrf\", \"true\");\n  const response = await fetch(formAction, {\n    method: \"POST\",\n    body: formData,\n  });\n  email.value = \"\";\n\n  if (response.ok) {\n    success.value = true;\n  } else {\n    error.value = true;\n  }\n}\n</script>\n\n<style></style>\n"],"names":["config","useAppConfig","menu","newsletterEnabled","formAction","email","ref","success","error","author","findAuthor","wanganUrl","subscribe","formData","response"],"mappings":"w1CAgFA,MAAMA,EAASC,IACTC,EAAOF,EAAO,KACdG,EAAoBH,EAAO,WAAW,QACtCI,EAAaJ,EAAO,WAAW,YAC/BK,EAAQC,EAAI,EAAE,EACdC,EAAUD,EAAI,EAAK,EACnBE,EAAQF,EAAI,EAAK,EACjBG,EAASC,IAETC,EAAY,gEAAgEX,EAAO,OAAO,MAAM,CAAC,EAGvG,eAAeY,GAAY,CACnB,MAAAC,EAAW,IAAI,SACZA,EAAA,OAAO,gBAAiBR,EAAM,KAAK,EACnCQ,EAAA,OAAO,YAAa,GAAG,EACvBA,EAAA,OAAO,WAAY,MAAM,EAC5B,MAAAC,EAAW,MAAM,MAAMV,EAAY,CACvC,OAAQ,OACR,KAAMS,CAAA,CACP,EACDR,EAAM,MAAQ,GAEVS,EAAS,GACXP,EAAQ,MAAQ,GAEhBC,EAAM,MAAQ,EAElB"}