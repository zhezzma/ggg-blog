---
title : "ecs中实体创建方法"
---

## 代码中创建实体,然后绑定view

## 在link的时候,创建相关实体

- SpaceWaterList.cs中,这种注意创建的实体和parent没有关系..如果是在land中,需要在销毁land的时候,同时销毁该实体.则不能使用该方法..

```
public void Link(World world, Entity entity, params object[] list)
{
    for (int i = 0; i < this.Spawners.Count; i++)
    {
        var waterEntity = world.EntityManager.CreateEntity();

        world.EntityManager.AddComponentObject(waterEntity,this.Spawners[i]); 

        this.Spawners[i].gameObject.Link(world, waterEntity, entity);
    }
}
```

- SpaceNPCList.cs中,通过ConverEntitys.ConvertGameObejct对游戏对象进行转换..注意其上的`ConvertToEntity`组件转换目标设置为`none` ,在这里`SpawnerAuthoring` 可以继承`DeclareParentBehaviour` 就可以设置parent.

```
    public List<SpawnerAuthoring> Spawners = new List<SpawnerAuthoring>();
    
    public void Link(World world, Entity entity, params object[] list)
    {
        foreach (var item in this.Spawners)
        {
            ConverEntitys.ConvertGameObejct(world, item.gameObject, entity);
        }
    }
```