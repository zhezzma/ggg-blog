---
title : "quest machine 使用相关"
---

- autostart  自动开始信息

- offer 发放任务时显示的信息

- states   任务开始时,结束时等各种状态时显示的信息..设置状态时执行其中的actionlist ,

- nodes  会有各个节点,他也会有各种显示的信息,会同states中的信息一起显示到各个位置

- Counter  定义计数的方式和存储计数的值,  但是不定义任务的目标值,目标值在节点中定义

#### npc任务指示的显示?

1. 进入地图后.拉取该地图所有npc的任务

2. 然后实例化任务

3. 则进行开始检查

   1. 是否自动开始?如果条件满足直接触发任务,添加到玩家任务列表,或者发送邮件提示之类的

   2. 是否有接取条件,如果有的话检查是否变成可接状态

QuestIndicatorManager不是单例相当于控制器.每个npc身上都有,主要是控制npc的指示显示

## 任务接受流程

- 组件Targetable中执行Interact(),会触发QuestGiver.StartDialogueWithPlayer

- 打开对话框

QuestGiver.GiveQuestToQuester

## 任务分类

- **MoveTo型任务（移动）**

  * 触发剧情

  * 新功能开放

- **Farm型任务（重复）**

  * 杀狼,动物

  * 搜集特殊物品,怪物掉落或者采集物品的时候偶尔采集到

  * 木材采集,钓鱼,制作料理

  * 地图内找寻物品,地图内传话,送礼物,酒

  * 追杀人物(地图内,地图外)

  * 杀人(地图内,地图外)

  * 镖局任务,跨地图送货,送信

- **Collect型任务（收集）**

  * 收集包(星露谷)

  * 图书馆(星露谷)

  * 藏经阁

- **Hunt型任务（狩猎）**

  * Boss

- **Puzzle型任务（解谜）**

- **Challenge型任务（挑战）**

  * 暗黑3 大秘境 xxx层

- **附加类：Storytelling型任务（叙事）**

## 显示

- 对话

  * 一条随机话语

  * 如果有任务,任务按钮

  * 如果有对话,显示对话按钮

- 更多