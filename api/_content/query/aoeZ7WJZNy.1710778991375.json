{"_path":"/unity/2021-10-01-increased-script-assembly-reload-time","_dir":"unity","_draft":false,"_partial":false,"_locale":"","title":"Increased script assembly reload time","description":"Hi,\nWe found out that this particular issue is very hard to work on as domain reload depends on a lot of things:\n- Number and types of UI widgets alive in the editor\n- Quantity of code in the project (including from packages)\n- Callbacks run as part of the domain reload (InitializeOnLoad, EditorApplication events...) that can be handled by both editor, first party packages, 3rd party packages or user code\n- Topology of the project...","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hi,\nWe found out that this particular issue is very hard to work on as domain reload depends on a lot of things:\n- Number and types of UI widgets alive in the editor\n- Quantity of code in the project (including from packages)\n- Callbacks run as part of the domain reload (InitializeOnLoad, EditorApplication events...) that can be handled by both editor, first party packages, 3rd party packages or user code\n- Topology of the project..."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"So when we get numbers from users, about Domain Reload times, there are a lot of times where we can't find where the root issue come from."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The good news is that this is going to change !"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In next version, Unity will ship with a diagnostic switch enabling detailed domain reload timings, allowing any user to see what actually happen on domain reload. This will help us figure what are the most common problematic components and on which ones we should prioritize optimization effort. This will also help users find workarounds for improving performance (e.g. close a particularly consuming UI widget, remove a package that is not really needed in the project,...).\nShortly after, we will backport this diagnostic switch to LTS versions of Unity (current plan is to backport down to 2019.4), to allow for more precise performance comparison."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We are also working internally to leverage that diagnostic tools to detect problems earlier in packages that we ship, as part of our internal package validation suites. This is an ongoing effort though, so don't put your expectations too high on this, and please report your detailed domain reload logs as soon as you get the update !"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Domain reload detailed timings can now be enabled in 2021.2.0a20 an 2021.1.11f1 (and we are busy backporting this to 2019.4 and 2020.3).\n- In 2021.2.x it can be enabled using the diagnostics switches in Editor Preferences\n"},{"type":"element","tag":"img","props":{"alt":"upload_2021-6-14_12-14-44.png","src":"/images/2021-10-01-Increased-script-assembly-reload-time/upload_2021-6-14_12-14-44-png.871142"},"children":[]},{"type":"text","value":"\n- In 2021.1 (which does not have the diagnostic switches UI), you can enable it with the environment variable UNITY_DIAG_ENABLE_DOMAIN_RELOAD_TIMINGS.\n(e.g. in a Powershell console, you can run"}]},{"type":"element","tag":"pre","props":{"code":" $env:UNITY_DIAG_ENABLE_DOMAIN_RELOAD_TIMINGS=\"1\"; & 'C:\\Program Files\\Unity\\Hub\\Editor\\2021.1.11f1\\Editor\\Unity.exe'\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":" $env:UNITY_DIAG_ENABLE_DOMAIN_RELOAD_TIMINGS=\"1\"; & 'C:\\Program Files\\Unity\\Hub\\Editor\\2021.1.11f1\\Editor\\Unity.exe'\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After that, in your editor logs ("}]},{"type":"element","tag":"pre","props":{"code":"%LOCALAPPDATA%\\Unity\\Editor\\Editor.log\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"%LOCALAPPDATA%\\Unity\\Editor\\Editor.log\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"), you'll see detailed timings on domain reload."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://forum.unity.com/threads/any-update-regarding-increased-script-assembly-reload-time.1117138/?_ga=2.41177696.399908227.1633157438-1122779591.1605612681","rel":["nofollow"]},"children":[{"type":"text","value":"Any update regarding \"Increased script assembly reload time\"? - Unity Forum"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:unity:2021-10-01-Increased-script-assembly-reload-time.md","_source":"content","_file":"unity/2021-10-01-Increased-script-assembly-reload-time.md","_extension":"md","date":"2021-10-01"}